{% load static %}
<!doctype html>
<html lang="tr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lambada Aydınlatma</title>

    <!-- bs css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <!-- Open Sans Googe Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
        rel="stylesheet">

    <!-- Oswald  Googe Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400&display=swap" rel="stylesheet">

    <!-- owl carousel css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">

    <!-- fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- style css -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>

    <!-- navbar -->
    {% include 'includes/_navbar.html' %}

    <!-- offcanvas-menu -->
    {% include 'includes/_offcanvas-menu.html' %}


    <!-- sepet alanı -->
    <section class="products py-5">
        <div class="container">
            <h6 class="minihead text-center">Alışveriş</h6>
            <h6 class="mdhead text-center">Sepetim</h6>
            <hr class="headhr">  
            {% if messages %}

                                
                {% for mesaj in messages %}
                    <div class="alert alert-{{ mesaj.tags }} text-center mt-3" id='mesaj'>
                        {{ mesaj }}
                    </div>
                {% endfor %}
            

            {% endif %}
            <div class="border px-4 mt-5 sepet">

                {% if sepetim.exists %}
                <div class="row mt-4">
                    <div class="col-2">
                        <h6>Ürün Resmi</h6>
                    </div>
                    <div class="col-2">
                        <h6>Ürün İsmi</h6>
                    </div>
                    <div class="col-2">
                        <h6>Birim Fiyatı</h6>
                    </div>
                    <div class="col-2">
                        <h6>Adet</h6>
                    </div>
                    <div class="col-2">
                        <h6>Toplam</h6>
                    </div>
                    <div class="col-2">
                        <h6>Sepetten Çıkar</h6>
                    </div>
                </div>
                <hr>
                {% else %}
                <p></p>
                {% endif %}
                {% if sepetim.exists %}
                    {% for urun in sepetim %}
                    <div class="row mt-2 d-flex align-items-center">
                        <div class="col-2">
                            <img src="{{ urun.urun.urunresmi.url }}" alt="" width="70px">
                        </div>
                        <div class="col-2">
                            <p>{{ urun.urun.isim }}</p>
                        </div>
                        <div class="col-2">
                            <p>{{ urun.urun.fiyat }} TL</p>
                        </div>
                        <div class="col-2">
                            <!-- <p>{{ urun.adet }} Adet</p> -->
                            <form action="" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="urunId" value="{{ urun.id }}">
                                <!-- <label for="">Adet: </label> -->
                                <input type="number" name="yeniAdet" value="{{ urun.adet }}" class="border-0 adetInput " style="width: 50px;">
                                <input type="submit" value="Güncelle" name="guncelle" class="btn btn-primary py-1 px-2 fw-light">
                            </form>
                        </div>
                        <div class="col-2">
                            <p>{{ urun.toplam|floatformat:2}} TL</p>
                        </div>
                        <div class="col-2">
                            <form action="" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="urunId" value="{{ urun.id }}">
                                <input type="submit" class="btn btn-close py-2" value="">
                            </form>
                        </div>
                    </div>
                    <hr>
                    {% endfor %}
                {% else %}
                    <div class="d-flex flex-column align-items-center gap-4 mt-5">
                        <p class="text-center" style="font-size: 20px;">Sepetinizde ürün bulunmuyor.</p>
                        <i class="fa-solid fa-cart-shopping m-auto" style="font-size: 100px;"></i>
                    </div>
                {% endif %}
                <div class="row py-3">
                    <div class="col-6">
                    </div>
                {% if sepetim.exists %}
                    <div class="col-6 mb-3 d-flex justify-content-end">
                        <div class="row">
                            <div class="col-6 text-end">
                                <p>Ürün Sayısı : </p>
                                <p>Ara Toplam : </p>
                                <p>KDV (%20%) : </p>
                                <p>Genel Toplam : </p>
                            </div>
                            <div class="col-6 ">
                                <p class="fw-bold" style="color: crimson;">{{ toplam_urun_sayisi }}</p>
                                <p class="fw-bold" style="color: crimson;">{{ araToplam }} TL</p>
                                <p class="fw-bold" style="color: crimson;">{{ kdv }} </p>
                                <p class="fw-bold" style="color: crimson;">{{ toplam_tutar }} TL</p>
                            </div>
                            <a href="{% url 'teslimat' %}" class="d-inline ms-auto mt-3 btn btn-primary py-2 me-5" style="width: 150px;">Ödeme Yap</a>
                            
                        </div>
                        <!-- <p class="fw-bolder"><span class=" fw-light">Toplam Ürün Sayısı:</span> {{ toplam_urun_sayisi }}</p>
                        <p class="fw-bolder"><span class="fw-light">Toplam Tutar:</span> {{ toplam_tutar }} TL</p> -->
                    </div>
                    {% else %}
                        <p></p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>


    <!-- footer -->
    {% include 'includes/_footer.html' %}



    <!-- bs js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

    <!-- owl carousel min js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>


    <!-- owl-carousel-js (silme)-->
    <script src="{% static 'js/owl-carousel.js' %}"></script>

    <!-- app js -->
    <script src="{% static 'js/app.js' %}"></script>
</body>

</html>